<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Programando em JS com Node.js no Arduino</title>
  <meta name="description" content="Developer">
  <meta name="author" content="Ramon Barros">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Programando em JS com Node.js no Arduino">
  <meta name="twitter:description" content="Developer">

  <meta property="og:url" content="http://localhost:4000//arduino/2018/07/31/arduino-node-js.html" />
  <meta property="og:type" content="article">
  <meta property="og:title" content="Programando em JS com Node.js no Arduino">
  <meta property="og:description" content="Developer">
  
  <meta property="og:image" content="http://localhost:4000//images/arduino/j5/johnny-five.png" />
  
  
  <meta name="google-site-verification" content="guyNAJizf4Z_4vd0tVhQt6uEwQcBcUVp3J7ATwGeMoY" />
  

  <link rel="apple-touch-icon" sizes="57x57" href="http://localhost:4000/images/favicons/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="http://localhost:4000/images/favicons/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="http://localhost:4000/images/favicons/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="http://localhost:4000/images/favicons/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="http://localhost:4000/images/favicons/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="http://localhost:4000/images/favicons/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="http://localhost:4000/images/favicons/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="http://localhost:4000/images/favicons/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="http://localhost:4000/images/favicons/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="http://localhost:4000/images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="http://localhost:4000/images/favicons/favicon-194x194.png" sizes="194x194">
  <link rel="icon" type="image/png" href="http://localhost:4000/images/favicons/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="http://localhost:4000/images/favicons/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="http://localhost:4000/images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="http://localhost:4000/images/favicons/manifest.json">
  <link rel="shortcut icon" href="http://localhost:4000/images/favicons/favicon.ico">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="msapplication-TileImage" content="http://localhost:4000/images/favicons/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="http://localhost:4000/css/main.css">
  <link rel="canonical" href="http://localhost:4000//arduino/2018/07/31/arduino-node-js.html">
  <link rel="alternate" type="application/rss+xml" title="Ramon Barros" href="/feed.xml">
  <script type="text/javascript">
    window.smartlook||(function(d) {
    var o=smartlook=function(){ o.api.push(arguments)},h=d.getElementsByTagName('head')[0];
    var c=d.createElement('script');o.api=new Array();c.async=true;c.type='text/javascript';
    c.charset='utf-8';c.src='https://rec.smartlook.com/recorder.js';h.appendChild(c);
    })(document);
    smartlook('init', '2df9094f8d91a76b8e963e635d68fd10abace184');
  </script>
</head>


  <body>
    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>

<header class="panel-cover" style="background-image: url(http://localhost:4000/images/cover.jpg)">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <a href="/" title="link to home of Ramon Barros">
          <img src="http://localhost:4000/images/profile.jpg" class="user-image" alt="My Profile Photo">
          <h2 class="panel-cover__title panel-title">Ramon Barros</h2>
        </a>
        <hr class="panel-cover__divider">
        <p class="panel-cover__description">Developer</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary">

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/#blog" title="link to Ramon Barros blog" class="blog-button">Blog</a></li>
            </ul>
          </nav>

          <nav class="cover-navigation navigation--social">
            <ul class="navigation">

            
              <!-- Twitter -->
              <li class="navigation__item">
                <a href="http://twitter.com/ramonbarros_" title="@ramonbarros_ on Twitter" target="_blank">
                  <i class="icon icon-social-twitter"></i>
                  <span class="label">Twitter</span>
                </a>
              </li>
            

            
              <!-- LinkedIn -->
              <li class="navigation__item">
                <a href="https://www.linkedin.com/in/ramonbarros" title="ramonbarros on LinkedIn" target="_blank">
                  <i class="icon icon-social-linkedin"></i>
                  <span class="label">LinkedIn</span>
                </a>
              </li>
            

            
              <!-- GitHub -->
              <li class="navigation__item">
                <a href="https://www.github.com/rbarros" title="rbarros on GitHub" target="_blank">
                  <i class="icon icon-social-github"></i>
                  <span class="label">GitHub</span>
                </a>
              </li>
            

            
              <!-- Email -->
              <li class="navigation__item">
                <a href="mailto:contato@ramon-barros.com" title="Email contato@ramon-barros.com" target="_blank">
                  <i class="icon icon-mail"></i>
                  <span class="label">Email</span>
                </a>
              </li>
            

            <!-- RSS -->
            <li class="navigation__item">
              <a href="http://localhost:4000/feed.xml" title="Subscribe" target="_blank">
                <i class="icon icon-rss"></i>
                <span class="label">RSS</span>
              </a>
            </li>

            </ul>
          </nav>

        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>

    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <article class="post-container post-container--single">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="31 Jul 2018" class="post-meta__date date">
        31 Jul 2018
      </time> &#8226;
      <span class="post-meta__tags">on
        
            <a href="/tags/#arduino">
                arduino
            </a>
        
            <a href="/tags/#nodejs">
                nodejs
            </a>
        
            <a href="/tags/#node">
                node
            </a>
        
            <a href="/tags/#js">
                js
            </a>
        
            <a href="/tags/#javascript">
                javascript
            </a>
        
      </span>
    </div>
    <h1 class="post-title">Programando em JS com Node.js no Arduino</h1>
  </header>

  <section class="post">
    <p>Bom este tutorial eu criei para facilitar para o desenvolvedor que gostaria de
programar em javascript para o Arduino e criar uma página web de forma mais
fácil. Dedico este post ao meu amigo Felipe, que estava buscando uma forma de
fazer isso também em seus projetos, sem ter que adicionar tags html no código em
c++.</p>

<p><img src="/images/arduino/j5/johnny-five.png" alt="johnny-five" title="Johnny-Five" /></p>

<p>Rick Waldron é o criador do projeto <a href="http://johnny-five.io" target="_blank">Johnny-Five</a> que utiliza JavaScript para
o desenvolvimento de robótica. Existem varios exemplos no website do projeto com
a possibilidade de utilizar sensores, motores, gpios, etc. Suporta uma variedade
de <a href="http://johnny-five.io/platform-support" target="_blank">hardwares</a>:</p>

<p><img src="/images/arduino/j5/platform-support.png" alt="platform-support" title="Platform Support" /></p>

<p>O que precisa para começar ?</p>

<p>Bom em primeiro lugar você vai precisar do <a href="https://nodejs.org" target="_blank">Node.js</a> instalado e da 
<a href="https://www.arduino.cc/en/Main/Software" target="_blank">IDE</a> do Arduino. No meu caso estou utilizando uma distribuição Linux, 
a Xubuntu, uma derivada do Ubuntu.</p>

<p>No Ubuntu/Xubuntu basta baixar o Arduino IDE conforme a arquitetura do seu
processador 32 ou 64 bits.</p>

<p><img src="/images/arduino/download-arduino-ide.jpg" alt="download-arduino-ide" title="Download Arduino IDE" /></p>

<p>No caso do Linux o arquivo é como este arduino-1.8.5-linux64.tar.xz, basta você
descompactar no diretório que quiser e depois abrir com o terminal o arquivo 
install.sh uma janela como esta irá aparecer e iniciar a instalação.</p>

<p><img src="/images/arduino/install.sh.png" alt="install-sh" title="Instalação do Arduino IDE" /></p>

<p>Após a instalação é criado o icone da IDE na sua Área de Trabalho e menu.</p>

<p><img src="/images/arduino/arduino-instalado.png" alt="arduino-instalado" title="Arduino IDE instalado" /></p>

<p>Abra o Arduino IDE, copie e cole o código do link abaixo:</p>

<p><a href="https://raw.githubusercontent.com/firmata/arduino/master/examples/StandardFirmataPlus/StandardFirmataPlus.ino" target="_blank">StandardFirmataPlus.ino</a></p>

<p>Clique em verificar e depois em carregar, caso ocorra algum erro como este no terminal:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">avrdude: ser_open<span class="o">()</span>: can<span class="s1">'t open device "/dev/ttyACM0": Permission denied
ioctl("TIOCMGET"): Inappropriate ioctl for device</span></code></pre></figure>

<p>Você deve dar permissão no dispositivo, digitando os dois comandos abaixo:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">sudo </span>usermod <span class="nt">-a</span> <span class="nt">-G</span> dialout <span class="nv">$USER</span>
<span class="nb">sudo </span>chmod a+rw /dev/ttyACM0</code></pre></figure>

<p>Tente novamente carregar o código no Arduino, se funcionar você vai ver no console
da IDE algum como isto:</p>

<p><img src="/images/arduino/arduino-carregado.png" alt="arduino-carregado" title="Arduino IDE Compilado e Carregado" /></p>

<p>Agora seu Arduino esta pronto para ser chamado pelo Johnny-Five.
Crie um diretório em algum lugar de sua preferencia e cole este código em um
arquivo, por exemplo board.js:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="c1">// board.js</span>
<span class="kd">var</span> <span class="nx">five</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"johnny-five"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">board</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">five</span><span class="p">.</span><span class="nx">Board</span><span class="p">();</span>

<span class="c1">// The board's pins will not be accessible until</span>
<span class="c1">// the board has reported that it is ready</span>
<span class="nx">board</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"ready"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Ready!"</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">led</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">five</span><span class="p">.</span><span class="nx">Led</span><span class="p">(</span><span class="mi">13</span><span class="p">);</span>
  <span class="nx">led</span><span class="p">.</span><span class="nx">blink</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<span class="p">});</span></code></pre></figure>

<p>Em um terminal execute este comando para instalar o johnny-five:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="err">#</span> <span class="nx">Instala</span><span class="err">çã</span><span class="nx">o</span> <span class="nx">da</span> <span class="nx">biblioteca</span> <span class="nx">johnny</span><span class="o">-</span><span class="nx">five</span> <span class="nx">para</span> <span class="nx">o</span> <span class="nx">Node</span><span class="p">.</span><span class="nx">js</span>
<span class="nx">npm</span> <span class="nx">install</span> <span class="nx">johnny</span><span class="o">-</span><span class="nx">five</span></code></pre></figure>

<p>No mesmo terminal digite este comando para executar o código em board.js</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="nx">node</span> <span class="nx">board</span><span class="p">.</span><span class="nx">js</span></code></pre></figure>

<p><img src="/images/arduino/j5/board.js.png" alt="board-js" title="Execução do código no Arduino" /></p>

<p>Se tudo der certo você verá que a luz padrão do Arduino começará a piscar.</p>

<p><img src="/images/arduino/j5/video-arduino.gif" alt="video-arduino" title="Video do Arduino" style="width:400px;" /></p>


  </section>
</article>
<div id="disqus_thread"></div>
<script>
    /**
    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//ramonbarros.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>
    Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>

      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2018 Ramon Barros. All rights reserved.</span>
</footer>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="http://localhost:4000/js/main.js"></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-32626396-1', 'auto');
  ga('send', 'pageview');
</script>

    </div>

    <!-- <script id="dsq-count-scr" src="//ramonbarros.disqus.com/count.js" async></script> -->
  </body>
</html>
